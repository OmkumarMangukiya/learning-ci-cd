name : Build and deploy to Docker Hub
on :
    push : 
        branches : 
            - master
jobs :  
    build-and-push :
        runs-on: ubuntu-latest
        steps:
            - name : Check out repo
              uses : actions/checkout@v2

            - name : Log in to Docker Hub
              uses  : docker/login-action@v1
              with : 
                username : ${{secrets.DOCKER_USERNAME}}
                password : ${{secrets.DOCKER_PASSWORD}}
            - name : Build and Push Docker Image
              uses : docker/build-push-action@v2
              with: 
                context : .
                file  : ./docker/Dockerfile.cd
                push : true
                tags : chiefiscoding/learning-ci-ci
            - name : Verify Pushed Image
              run : docker pull chiefiscoding/learning-ci-ci



